<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout.html}">
<div layout:fragment="content">
    <h2>회원 등록</h2>

    <!-- form action은 post로 /members로 전송 -->
    <form th:object="${member}" method="post" class="row g-3" id="memberForm" data-ajax>

        <!-- 이름 -->
        <div class="col-md-6">
            <label for="name" class="form-label">이름</label>
            <input type="text" th:field="*{name}" class="form-control" id="name" placeholder="홍길동" required>
        </div>

        <!-- 전화번호 -->
        <div class="col-md-6">
            <label for="phone" class="form-label">전화번호</label>
            <input type="text" th:field="*{phone}" class="form-control" id="phone" placeholder="010-1234-5678" required>
        </div>

        <!-- 주소 -->
        <div class="col-md-12">
            <label for="address" class="form-label">주소</label>
            <input type="text" th:field="*{address}" class="form-control" id="address" placeholder="서울시 강남구...">
        </div>

        <!-- 가입일 (자동 등록되면 hidden 처리 가능) -->
        <div class="col-md-6">
            <label for="registeredAt" class="form-label">가입일</label>
            <input type="date" th:field="*{registeredAt}" class="form-control" id="registeredAt">
        </div>

        <!-- 메모 -->
        <div class="col-md-12">
            <label for="note" class="form-label">메모</label>
            <input type="text" th:field="*{note}" class="form-control" id="note" placeholder="메모를 남겨주세요.">
        </div>

        <!-- 버튼 -->
        <div class="col-12">
            <button onclick="lfn_createMember()" type="submit" class="btn btn-primary">등록</button>
            <a th:href="@{/member}" class="btn btn-secondary">취소</a>
        </div>
    </form>
    <script>
        <!--  회원 등록하기  -->
        function lfn_createMember(){
            var bAnswer = confirm("회원 등록 하시겠습니까?");

            if(bAnswer) lfn_submit();

        }

        <!-- form 트랜잭션 실행-->
        function lfn_submit(){
            let form = document.getElementById("memberForm");
            form.action = '/member';
            form.method = 'POST';
            form.submit();
        }
    </script>
</div>
</html>